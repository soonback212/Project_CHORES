cmake_minimum_required(VERSION 3.5)
project(toad_auto_drive)

# í•„ìˆ˜ íŒ¨í‚¤ì§€ë“¤
find_package(ament_cmake REQUIRED)
find_package(rclcpp REQUIRED)
find_package(std_msgs REQUIRED)
find_package(sensor_msgs REQUIRED)
find_package(geometry_msgs REQUIRED)
find_package(serial REQUIRED)
find_package(OpenCV REQUIRED)  # ğŸ”¹ OpenCV ì¶”ê°€
find_package(rosidl_default_generators REQUIRED)
find_package(trash_camera REQUIRED)

# ë©”ì‹œì§€ ì¸í„°í˜ì´ìŠ¤ ìƒì„±
rosidl_generate_interfaces(${PROJECT_NAME}
  "msg/ToadDriveMsg.msg"
  "msg/ToadTeleopMsg.msg"
  DEPENDENCIES std_msgs geometry_msgs
)



ament_export_dependencies(rosidl_default_runtime)

# í¼ë¸”ë¦¬ì…” ë…¸ë“œ
add_executable(toad_auto_drive_pub src/toad_auto_drive_pub.cpp)
ament_target_dependencies(toad_auto_drive_pub
  rclcpp
  std_msgs
  sensor_msgs
  geometry_msgs
  serial     # ğŸ”¹ OpenCV ì˜ì¡´ì„± ì¶”ê°€
)

add_executable(toad_teleop_pub src/toad_teleop_pub.cpp)
ament_target_dependencies(toad_teleop_pub
rclcpp
std_msgs
sensor_msgs
geometry_msgs
serial
)

add_executable(toad_controller_node src/toad_controller_node.cpp)
ament_target_dependencies(toad_controller_node
	rclcpp
	std_msgs
	sensor_msgs
	geometry_msgs
	serial
	trash_camera
	)

add_executable(toad_teleop_sub src/toad_teleop_sub.cpp)
ament_target_dependencies(toad_teleop_sub
rclcpp
std_msgs
sensor_msgs
geometry_msgs
serial
)


add_executable(auto_drive_sub_node src/toad_auto_drive_sub.cpp)
ament_target_dependencies(auto_drive_sub_node
  rclcpp
  std_msgs
  serial
)

# íƒ€ì…ì„œí¬íŠ¸
rosidl_get_typesupport_target(
  TYPESUPPORT_TARGET
  ${PROJECT_NAME}
  rosidl_typesupport_cpp
)

# ğŸ”¹ OpenCV ë§í¬ ì¶”ê°€
target_link_libraries(toad_auto_drive_pub
   ${TYPESUPPORT_TARGET}
)
target_link_libraries(auto_drive_sub_node
   ${TYPESUPPORT_TARGET}
)

target_link_libraries(toad_teleop_pub
${TYPESUPPORT_TARGET}
)

target_link_libraries(toad_teleop_sub
${TYPESUPPORT_TARGET}
)

target_link_libraries(toad_controller_node
	${TYPESUPPORT_TARGET}
	)

# ì„¤ì¹˜ ì§€ì‹œ
install(
  TARGETS
    toad_auto_drive_pub
    auto_drive_sub_node
    toad_teleop_pub
    toad_teleop_sub
    toad_controller_node
  DESTINATION lib/${PROJECT_NAME}
)

ament_package()
